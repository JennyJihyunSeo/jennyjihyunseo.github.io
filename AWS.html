<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Stat2</title>

<script src="site_libs/header-attrs-2.26/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>






<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Jihyun (Jenny) Seo</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Stat/ML
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="stat1.html">Customer Segmentation and Predicting Campaign Offer Acceptance</a>
    </li>
    <li>
      <a href="stat3.html">Multiple Linear Regression: California Housing Dataset</a>
    </li>
    <li>
      <a href="stat2.html">Statistics using R</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    DB/SQL
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="dbsql1.html">Customer Personality Analysis</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Visualization
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="visualization1.html">Squid Game Elimination Analysis</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    AWS
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="AWS.html">AWS Fundamentals</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="contact.html">
    <span class="fa fa-sharp fa-solid fa-envelope"></span>
     
  </a>
</li>
<li>
  <a href="files/RESUME_SEO JIHYUN.pdf">
    <span class="ai ai-cv ai-lg"></span>
     
  </a>
</li>
<li>
  <a href="http://github.com/JennyJihyunSeo">
    <span class="fab fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://www.linkedin.com/in/ssue513">
    <span class="fab fa-linkedin-in"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Cloud Fundamentals</h1>

</div>


<p><link rel="stylesheet" href="styles.css" type="text/css">
<link rel="stylesheet" href="site_libs/academicons-1.9.1/css/academicons.min.css"/></p>
<p><br><br><br></p>
<p><br><br><br></p>
<div id="cloud-fundamentals-project" class="section level2">
<h2>Cloud Fundamentals Project</h2>
<p><br></p>
<p><br><br><br></p>
<div id="goals" class="section level3">
<h3>1. Goals</h3>
<p>This AWS Fundamentals project aimed to understand AWS services
through hands-on experience by using AWS Management Console and
CloudFormation templates with VS Code. After acquiring AWS certified
Cloud Practitioner, I aspire to deepen my understanding of AWS through
hands-on experience as I am not familiar with using cloud services while
working in a food manufacturing industry and cloud services are not
tangible compared to food products which makes me hard to understand the
back-end processes occurred in AWS environments. This project helped me
understand fundamental AWS services by manually deploying and automating
resources. Particularly, I created a VPC manually using the AWS Console
and configured public subnets and private subnets across different
availability zones to understand how AWS resources connect to the
Internet and control both inbound and outbound traffic while enhancing
security. Furthermore, I automated this process through Infrastructure
as Code by implementing CloudFormation templates and creating YAML files
in VS Code. I built stacks including different AWS resources such as
VPCs, subnets, security groups, route tables, auto scaling groups, an
Amason S3 bucket hosting a simple static website and a relational
database. All these hands-on activities were proceeded with AWS
fundamental concepts which enhances my deep understanding of AWS global
infrastructure and its applications.</p>
<p><br></p>
</div>
<div id="aws-global-infrastructure-review" class="section level3">
<h3>2. AWS Global Infrastructure Review</h3>
<p>AWS operate distinct AWS regions such as us-west-1 where
independently isolated availability zones are designed to provide stable
and fast services for users. Each availability zone has its own data
centers which have redundant power, network and connectivity for fault
tolerance to provide reliable, scalable, low latency services for users.
CloudFront is AWS content delivery network service providing fast and
reliable connectivity for users using AWS services around the globe by
strategically locating Edge Locations near them. I learned the functions
of public subnets and private subnets located within VPC. Public subnets
connect directly to the Internet using a public route table, a router
and an Internet Gateway (IGW). In contrast, private subnets cannot
directly connect to the Internet for enhanced security. However, they
can indirectly communicate with the Internet through a NAT gateway
located in a public subnet. Within a VPC, public subnets and private
subnets can communicate with each other using private route tables.
Typically, outbound traffic responding to users’ requests is allowed but
inbound traffic from users to access AWS resources within VPC is not
allowed. Web servers handling users’ requests are located in public
subnets while back-end databases and other business logics are located
in private subnets to enhance security. When launching a VPC, CIDR
Blocks are used to assign an IP address range to the VPC. CIDR notation
specifies the IP address range and determines the number of distinct AWS
resources which can be assigned within the VPC. There can be distinct
VPCs within AWS whereas they are independent of each other. CIDR blocks
enabled effective management of grouped AWS resources and subnets within
a VPC Security groups are attached to instances and other AWS resources
while Network Access Control Lists (NACLs) are attached to subnets to
control both inbound and outbound traffic. Security groups are stateful,
effectively remembering allowed traffic and applying the same rule to
the same traffic whereas NACLs are stateless, checking every inbound and
outbound traffic individually whenever traffic accesses subnets.<br />
Additionally, I learned about Identity and Access Management (IAM) which
provides credentials to users, groups and roles, enabling secure access
to AWS resources while enhancing security management. IAM users allow
individual users to access AWS resources while IAM groups allow groups
including several users with similar roles to access AWS resources
rather than controlling individual users. IAM roles are temporary
credentials provided for applications or services to allow them to
interact with AWS resources rather than providing permanent credentials
which can pose security issues. Policies define permissions specifying
whether access to AWS resources is allowed or denied. The principle of
least privilege means that users, group or roles must be provided the
least permissions necessary to perform their specific tasks to enhance
security management within AWS.</p>
<p><br></p>
</div>
<div
id="explaining-results-for-configuring-a-vpc-with-public-and-private-subnets"
class="section level3">
<h3>3. Explaining Results for configuring a VPC with public and private
subnets</h3>
<div id="creating-vpc" class="section level4">
<h4>(1) Creating VPC</h4>
<p>I created a VPC and assigned an IP address range using a CIDR block.
I configured 2 distinct availability zones within VPC, each containing 1
public subnet and 2 private subnets. Public subnets have a common route
table connecting to the Internet Gateway (IGW) while private subnets
have their own private route tables communicating with public subnets
and other AWS resources locally. When private subnets route outbound
traffic to the Internet, this must be routed through a NAT gateway in a
public subnet indirectly and securely connected to the Internet while
enhancing security. VPC endpoints can be Amazon S3 bucket and Dynamo DB,
enabling direct connections to AWS resources within VPC without using
the public connectivity. However, installing a NAT gateway in each
public subnet costs a lot of money. Instead, I installed a Bastion Host
(EC2 instance) in a public subnet, connected to an EC2 instance in a
private subnet within the same Availability Zone (AZ) and then to
another EC2 instance in a different Availability Zone. I also generated
a key pair as bastion to securely connect to the Bastion server from my
local computer and a security group for this bastion server only
allowing inbound traffic from my own local computer. I can send inbound
traffic to the bastion instance by using its public IPv4 address.</p>
<p><br></p>
</div>
<div id="ssh-access-to-a-private-subnet" class="section level4">
<h4>(2) SSH access to a private subnet</h4>
<p>SSH is an encrypted protocol using a key pair to securely control
remote computers and servers effectively. I used the key pair when
connecting to an EC2 instance in the public subnet and then SSH
connection to another E2 instance in the private subnet within the same
availability zone. Rather than creating another bastion host in a public
subnet in a different availability zone, I sent a request to another EC2
instance in the private subnet in the different availability zone. The
public IPv4 address of my local computer must be allowed by the security
group of the instance installed in the public subnet while using the
bastion key pair for the public connection. In addition, the security
group for the instance in the public subnet must be allowed by the
security group for the private subnet within the same availability zone.
In contrast, when connecting to another instance in the private subnet
in the different availability zone, SSH connection using the key pair
was not necessary. Instead, sending the request from the instance in the
private subnet must be allowed by the security group for the counterpart
private instance.</p>
<p><br></p>
</div>
<div id="automate-the-same-process-by-using-cloudformation"
class="section level4">
<h4>(3) Automate the same process by using CloudFormation</h4>
<p>I learned about Infrastructure as Code and CloudFormation automating
the entire processes of establishing AWS resources in AWS environments
consistently using VS Code and creating YAML. Infrastructure as Code
means installing AWS resources within AWS environments using code not
relying on manual processes to configure resources fast and efficiently.
CloudFormation is the most famous tool for Infrastructure as Code, which
can reduce manual errors and generate several versions to help
developers track the changes made. These CloudFormation templates can be
reused, which automates the configuration processes and improves the
efficiency. CloudFormation templates are created by JSON or YAML. First,
I create a ‘MyVPC’ and DNS server which support AWS resources within VPC
to communicate with other resources effectively using IP address. And
then, I created one public subnet and 2 private subnets in each
availability zone. When configuring the public subnet named as
‘PublicSubnet1A’, I mapped public IP address to ensure the public access
to the Internet. In contrast, when configuring private subnets, I did
not map the public IP address as they are not directly connected to the
Internet. Finally, I deployed ‘PublicSubnet1A’, ‘AppPrivateSubnet1A’ and
‘DataPrivateSubnet1A’ in us-west-1a and then ‘PublicSubnet2B’,
‘ppPrivateSubnet2B’ and ‘DataPrivateSubnet2B’ in the other availability
zone in us-west-1b.</p>
<p>Second, I defined an Internet Gateway and then attached it to the
‘MyVPC’ to ensure public access to the public subnet in us-west-1a. I
generated a public route table attached to the public subnet and public
route allowing all outbound IPv4 traffic to the Internet Gateway (IGW).
Third, before creating an EC2 instance called as Bastion Host in the
public subnet in us-west-1a, I learned about AWS computing services such
as Amazon EC2, AWS Lambda, AWS Elastic Beanstalk and Amazon ECS. Amazon
EC2 has diverse instance types such as general purpose,
compute-optimized, memory optimized and storage optimized and different
pricing models such as on-demand instances, reserved instances and spot
instances. On-demand instances are ideal for short-term and
unpredictable usage as consumers are allowed to pay for what they used.
In contrast, reserved instances offer significant discounts on long-term
usage such as 1 to 3 commitments and are ideal for steady workloads.
Spot instances provide cost savings by bidding on unused EC2 instances
but they can be interrupted when prices exceed bids. AWS Lambda is a
serverless computing, completely managed by AWS by uploading code. It
does not need any manual management process of underlying
infrastructure. AWS Elastic Beanstalk is a Platform as a Service for
managing and deploying applications, managed by AWS but provides more
flexibility for managing underlying EC2 instances. Amazon ECS manages
docker containers and runs applications on cluster of EC2 instances.</p>
<p>I created an EC2 instance in the PublicSubnet1A named as a
BastionHost and used the same key pair I have created through AWS
Management Console. I created a security group of the instance in the
public subnet and put the IPv4 address of my local computer to SSH to
the Bastion Host, which allows inbound traffic rule in the security
group. Additionally, I created a private instance named as ‘App1’ in
AppPrivateSubnet1A with the security group allowed SSH access from the
Bastion Host in the public subnet within the same availability zone. I
configured another private instance named as ‘App2’ in
AppPrivateSubnet2B with the security group. I did not SSH to the App2
instance. Instead, I made the security group to allow the ping request
from App1 by allowing ICMP echo requests originating from App1.</p>
</div>
<div id="code" class="section level4">
<h4>(4) Code</h4>
<pre class="yaml"><code># My VPC
AWSTemplateFormatVersion: &#39;2010-09-09&#39;
Description: &#39;CloudFormation for VPC&#39;
Resources:
  MyVPC:
    Type: &#39;AWS::EC2::VPC&#39;
    Properties:
      CidrBlock: &#39;172.16.0.0/16&#39;
      EnableDnsSupport: true
      EnableDnsHostnames: true
      Tags:
        - Key: Name
          Value: MyVPC
# Public Subnet in AZ 1
  PublicSubnet1A:
    Type: &#39;AWS::EC2::Subnet&#39;  
    Properties:
      VpcId: !Ref MyVPC
      CidrBlock: &#39;172.16.1.0/24&#39;
      AvailabilityZone: !Select [0, !GetAZs &#39;&#39;]
      MapPublicIpOnLaunch: true
      Tags:
        - Key: Name
          Value: PublicSubnet1A
# App Private Subnet in AZ 1
  AppPrivateSubnet1A:
    Type: &#39;AWS::EC2::Subnet&#39;
    Properties:
      VpcId: !Ref MyVPC
      CidrBlock: &#39;172.16.2.0/24&#39;
      AvailabilityZone: !Select [0, !GetAZs &#39;&#39;]
      Tags:
        - Key: Name
          Value: AppPrivateSubnet1A
# Data Private Subnet in AZ 1
  DataPrivateSubnet1A:
    Type: &#39;AWS::EC2::Subnet&#39;
    Properties:
      VpcId: !Ref MyVPC
      CidrBlock: &#39;172.16.3.0/24&#39;
      AvailabilityZone: !Select [0, !GetAZs &#39;&#39;]
      Tags:
        - Key: Name
          Value: DataPrivateSubnet1     
# Public subnet in AZ 2
  PublicSubnet2B:
    Type: &#39;AWS::EC2::Subnet&#39;
    Properties:
      VpcId: !Ref MyVPC
      CidrBlock: &#39;172.16.4.0/24&#39;
      AvailabilityZone: !Select [1, !GetAZs &#39;&#39;]
      MapPublicIpOnLaunch: true
      Tags:
        - Key: Name
          Value: PublicSubnet2B
# App Private Subnet in AZ 2
  AppPrivateSubnet2B:
    Type: &#39;AWS::EC2::Subnet&#39;
    Properties:
      VpcId: !Ref MyVPC
      CidrBlock: &#39;172.16.5.0/24&#39;
      AvailabilityZone: !Select [1, !GetAZs &#39;&#39;]
      Tags:
        - Key: Name
          Value: AppPrivateSubnet2B
# Data Private Subnet in AZ 2
  DataPrivateSubnet2B:
    Type: &#39;AWS::EC2::Subnet&#39;
    Properties:
      VpcId: !Ref MyVPC
      CidrBlock: &#39;172.16.6.0/24&#39;
      AvailabilityZone: !Select [1, !GetAZs &#39;&#39;]
      Tags:
        - Key: Name
          Value: DataPrivateSubnet2B

# Define the Internet Gateway (IGW)
  InternetGateway:
    Type: &#39;AWS::EC2::InternetGateway&#39;
    Properties:
      Tags:
        - Key: Name
          Value: MyVPC-IGW
# Attach the IGW to VPC
  AttachGateway:
    Type: &#39;AWS::EC2::VPCGatewayAttachment&#39;
    Properties:
      VpcId: !Ref MyVPC
      InternetGatewayId: !Ref InternetGateway          

# Public Route Table
  PublicRouteTable:
    Type: &#39;AWS::EC2::RouteTable&#39;
    Properties:
      VpcId: !Ref MyVPC
      Tags:
        - Key: Name
          Value: PublicRouteTable
# Public Route
  PublicRoute:
    Type: &#39;AWS::EC2::Route&#39;
    DependsOn: AttachGateway
    Properties:
      RouteTableId: !Ref PublicRouteTable
      DestinationCidrBlock: &#39;0.0.0.0/0&#39;
      GatewayId: !Ref InternetGateway

# Attach the public route table to the public subnet (Public Subnet Association)
  PublicSubnet1ARouteTableAssociation:
    Type: &#39;AWS::EC2::SubnetRouteTableAssociation&#39;
    Properties:
      SubnetId: !Ref PublicSubnet1A
      RouteTableId: !Ref PublicRouteTable
      
# Create Bastion Host EC2
  BastionHost:
    Type: &#39;AWS::EC2::Instance&#39;
    Properties:
      InstanceType: t2.micro
      KeyName: bastion
      ImageId: ami-0aa117785d1c1bfe5
      SubnetId: !Ref PublicSubnet1A
      SecurityGroupIds:
        - !Ref BastionSG
      Tags:
        - Key: Name
          Value: BastionHost  

# Bastion Security Group
  BastionSG:
    Type: &#39;AWS::EC2::SecurityGroup&#39;
    Properties:
      GroupDescription: &#39;Enable SSH access&#39;
      VpcId: !Ref MyVPC
      SecurityGroupIngress:
        - IpProtocol: tcp
          FromPort: 22
          ToPort: 22
          CidrIp: 209.129.88.192/32

 # AppInstance1A
  AppInstance1A:
    Type: &#39;AWS::EC2::Instance&#39;
    Properties:
      InstanceType: t2.micro
      KeyName: bastion
      ImageId: ami-0aa117785d1c1bfe5
      SubnetId: !Ref AppPrivateSubnet1A   
      SecurityGroupIds:
        - !Ref AppInstance1ASG
      Tags:
        - Key: Name
          Value: App1
 # AppInstance2B
  AppInstance2B:
    Type: &#39;AWS::EC2::Instance&#39;
    Properties:
      InstanceType: t2.micro
      ImageId: ami-0aa117785d1c1bfe5  
      SubnetId: !Ref AppPrivateSubnet2B  
      SecurityGroupIds:
        - !Ref AppInstance2BSG
      Tags:
        - Key: Name
          Value: App2         

# Security Group of App1A
  AppInstance1ASG:
    Type: &#39;AWS::EC2::SecurityGroup&#39;
    Properties:
      GroupDescription: &#39;Allow SSH from the Bastion&#39;
      VpcId: !Ref MyVPC
      SecurityGroupIngress:
        - IpProtocol: tcp
          FromPort: 22
          ToPort: 22
          SourceSecurityGroupId: !Ref BastionSG

# Security Group of App2B
  AppInstance2BSG:
    Type: &#39;AWS::EC2::SecurityGroup&#39;
    Properties:
      GroupDescription: &#39;Allow ICMP Ping from App1A&#39;
      VpcId: !Ref MyVPC
      SecurityGroupIngress:
        - IpProtocol: icmp
          FromPort: 22
          ToPort: 22
          SourceSecurityGroupId: !Ref AppInstance1ASG</code></pre>
<p><br></p>
</div>
</div>
<div
id="explaining-results-for-iam-load-balancing-s3-bucket-rds-and-auto-scaling-group"
class="section level3">
<h3>4. Explaining results for IAM, Load Balancing, S3 bucket, RDS and
Auto Scaling Group</h3>
<div id="iam-users-iam-groups-iam-roles-and-iam-policies"
class="section level4">
<h4>(1) IAM users, IAM groups, IAM roles, and IAM policies</h4>
<p>I created an IAM user and granted it ‘AdministratorAccess’ permission
and IAM group named ‘Developergroup’ to attach this user to the group.
IAM users are individuals which are granted permissions through IAM
policies. IAM groups involve several IAM users who have similar roles
and allow us to manage users effectively by providing permissions
collectively to the users in the same group. IAM roles can be attached
to AWS resources, such as EC2 instances, to grant permissions for
specific actions on other resources in AWS environments. IAM policies
define permissions to IAM users, groups and roles by specifying actions
and effects (allow or deny) applied to specific resources. In this
project, I created a S3 bucket custom policy which allows to get all
objects stored in any configured S3 bucket.</p>
<pre class="yaml"><code>AWSTemplateFormatVersion: &#39;2010-09-09&#39;
Description: &#39;IAM Cloudformation template&#39;


# Create IAM user 
Resources:
  MyIAMUser:
    Type: &#39;AWS::IAM::User&#39;
    Properties:
       UserName: &#39;JennyAWSUser&#39;
       ManagedPolicyArns:
         - &#39;arn:aws:iam::aws:policy/AdministratorAccess&#39; # grant a permission
  # My IAM Group
  MyIAMGroup:
    Type: &#39;AWS::IAM::Group&#39;
    Properties:
      GroupName: &#39;Developergroup&#39;

  # Attach User to Group    
  UserToGroup:
    Type: &#39;AWS::IAM::UserToGroupAddition&#39;
    Properties:
      GroupName: !Ref MyIAMGroup 
      Users:
        - !Ref MyIAMUser
  # IAM Role for EC2
  MyIAMRole:
    Type: &#39;AWS::IAM::Role&#39;
    Properties:
      AssumeRolePolicyDocument:
        Version: &#39;2012-10-17&#39;
        Statement:
          - Effect: &#39;Allow&#39;
            Principal:
              Service: [&quot;ec2.amazonaws.com&quot;] # grant IAM role for EC2 instance
            Action: [&#39;sts:AssumeRole&#39;]  
      ManagedPolicyArns:
        - &#39;arn:aws:iam::aws:policy/PowerUserAccess&#39;    
  
  # S3 Custom Policy
  MyIAMPolicy:
    Type: &#39;AWS::IAM::Policy&#39;
    Properties:
      PolicyName: &#39;CustomPolicy&#39;
      PolicyDocument:
        Version: &#39;2012-10-17&#39;
        Statement:
          - Effect: &#39;Allow&#39;
            Action:
              - &quot;S3:GetObject&quot; # Get all objects in S3
            Resource: &#39;*&#39; # Apply this policy to all S3 buckets 
      Roles:
        - !Ref MyIAMRole     </code></pre>
</div>
<div id="aws-elastic-load-balancing" class="section level4">
<h4>(2) AWS Elastic Load Balancing</h4>
<p>Before configuring an Application Load Balancer through a
CloudFormation template, I learned about what is Elastic Load balancing.
ELB distributed incoming traffic across back-end target servers to
enhance the fault tolerance of applications. If demands peaked posing a
huge number of requests, ELB is necessary to distribute those incoming
traffic across multiple EC2 instances to retain low-latency and high
performance of applications. There are 2 different Elastic Load
Balancers, such as Application Load Balancers and Network Load
Balancers. Application Load Balancers (ALB) distribute HTTP/HTTPS
requests across multiple EC2 instances based on host names and URL
paths. It allows more advanced incoming traffic distribution based on
their requests ideal for moder applications, such as containers,
microservices and Kubernetes. Network Load Balancers (NLB) distribute
TCP, UDP and TLS traffic to enables ultra-low latency and high
performance necessary for real-time and high throughput applications. I
created 2 public subnets with the public route table to connect
instanced to the public Internet. I configured an application load
balancer distributing incoming HTTP request from the public Internet to
the target configured WebServerInstance1A and WebServerInstance2B in
distinct public subnets. If incoming traffic reached out one of the web
servers, a web page would be displayed hosted on the EC2 instance.</p>
<pre class="yaml"><code># My VPC
AWSTemplateFormatVersion: &#39;2010-09-09&#39;
Description: &#39;CloudFormation for VPC&#39;
Resources:
  MyVPC:
    Type: &#39;AWS::EC2::VPC&#39;
    Properties:
      CidrBlock: &#39;172.16.0.0/16&#39;
      EnableDnsSupport: true
      EnableDnsHostnames: true
      Tags:
        - Key: Name
          Value: MyVPC
# Public Subnet in AZ 1
  PublicSubnet1A:
    Type: &#39;AWS::EC2::Subnet&#39;  
    Properties:
      VpcId: !Ref MyVPC
      CidrBlock: &#39;172.16.1.0/24&#39;
      AvailabilityZone: !Select [0, !GetAZs &#39;&#39;]
      MapPublicIpOnLaunch: true
      Tags:
        - Key: Name
          Value: PublicSubnet1A
# App Private Subnet in AZ 1
  AppPrivateSubnet1A:
    Type: &#39;AWS::EC2::Subnet&#39;
    Properties:
      VpcId: !Ref MyVPC
      CidrBlock: &#39;172.16.2.0/24&#39;
      AvailabilityZone: !Select [0, !GetAZs &#39;&#39;]
      Tags:
        - Key: Name
          Value: AppPrivateSubnet1A
# Data Private Subnet in AZ 1
  DataPrivateSubnet1A:
    Type: &#39;AWS::EC2::Subnet&#39;
    Properties:
      VpcId: !Ref MyVPC
      CidrBlock: &#39;172.16.3.0/24&#39;
      AvailabilityZone: !Select [0, !GetAZs &#39;&#39;]
      Tags:
        - Key: Name
          Value: DataPrivateSubnet1     
# Public subnet in AZ 2
  PublicSubnet2B:
    Type: &#39;AWS::EC2::Subnet&#39;
    Properties:
      VpcId: !Ref MyVPC
      CidrBlock: &#39;172.16.4.0/24&#39;
      AvailabilityZone: !Select [1, !GetAZs &#39;&#39;]
      MapPublicIpOnLaunch: true
      Tags:
        - Key: Name
          Value: PublicSubnet2B
# App Private Subnet in AZ 2
  AppPrivateSubnet2B:
    Type: &#39;AWS::EC2::Subnet&#39;
    Properties:
      VpcId: !Ref MyVPC
      CidrBlock: &#39;172.16.5.0/24&#39;
      AvailabilityZone: !Select [1, !GetAZs &#39;&#39;]
      Tags:
        - Key: Name
          Value: AppPrivateSubnet2B
# Data Private Subnet in AZ 2
  DataPrivateSubnet2B:
    Type: &#39;AWS::EC2::Subnet&#39;
    Properties:
      VpcId: !Ref MyVPC
      CidrBlock: &#39;172.16.6.0/24&#39;
      AvailabilityZone: !Select [1, !GetAZs &#39;&#39;]
      Tags:
        - Key: Name
          Value: DataPrivateSubnet2B

# Define the Internet Gateway (IGW)
  InternetGateway:
    Type: &#39;AWS::EC2::InternetGateway&#39;
    Properties:
      Tags:
        - Key: Name
          Value: MyVPC-IGW
# Attach the IGW to VPC
  AttachGateway:
    Type: &#39;AWS::EC2::VPCGatewayAttachment&#39;
    Properties:
      VpcId: !Ref MyVPC
      InternetGatewayId: !Ref InternetGateway          

# Public Route Table
  PublicRouteTable:
    Type: &#39;AWS::EC2::RouteTable&#39;
    Properties:
      VpcId: !Ref MyVPC
      Tags:
        - Key: Name
          Value: PublicRouteTable
# Public Route
  PublicRoute:
    Type: &#39;AWS::EC2::Route&#39;
    DependsOn: AttachGateway
    Properties:
      RouteTableId: !Ref PublicRouteTable
      DestinationCidrBlock: &#39;0.0.0.0/0&#39;
      GatewayId: !Ref InternetGateway

# Attach the public route table to the public subnet (Public Subnet Association)
  PublicSubnet1ARouteTableAssociation:
    Type: &#39;AWS::EC2::SubnetRouteTableAssociation&#39;
    Properties:
      SubnetId: !Ref PublicSubnet1A
      RouteTableId: !Ref PublicRouteTable

# Attach the public route table to the public subnet 2B
  PublicSubnet2BRouteTableAssociation:
    Type: AWS::EC2::SubnetRouteTableAssociation
    Properties:
      SubnetId: !Ref PublicSubnet2B
      RouteTableId: !Ref PublicRouteTable


# Application Load Balancer
  MyLoadBalancer:
    Type: &#39;AWS::ElasticLoadBalancingV2::LoadBalancer&#39;
    Properties:
      Subnets:
        - !Ref PublicSubnet1A 
        - !Ref PublicSubnet2B
      SecurityGroups:
        - !Ref WebServerSecurityGroup

# Target Group for ALB
  MyTargetGroup:
    Type: &#39;AWS::ElasticLoadBalancingV2::TargetGroup&#39;
    Properties:
      VpcId: !Ref MyVPC
      Port: 80
      Protocol: &#39;HTTP&#39; # When receiving HTTP requests, ALB routes them to a target within the pre-defined target group
      Targets:
        - Id: !Ref WebServerInstance1A
        - Id: !Ref WebServerInstance2B

# Listener for ALB
  MyListener:
    Type: &#39;AWS::ElasticLoadBalancingV2::Listener&#39;
    Properties:
      DefaultActions:
        - Type: &#39;forward&#39; # Forward incoming HTTP requests to the target group 
          TargetGroupArn: !Ref MyTargetGroup
      LoadBalancerArn: !Ref MyLoadBalancer # Attach load balancer
      Port: 80
      Protocol: &#39;HTTP&#39;

# Web Server / ALB Security Group 
  WebServerSecurityGroup:
    Type: &#39;AWS::EC2::SecurityGroup&#39;
    Properties:
      GroupDescription: &#39;Enable HTTP Access&#39;
      VpcId: !Ref MyVPC
      SecurityGroupIngress:
        - IpProtocol: &#39;tcp&#39;
          FromPort: &#39;80&#39;
          ToPort: &#39;80&#39;
          CidrIp: &#39;0.0.0.0/0&#39;

# WebServerInstance1A
  WebServerInstance1A:
    Type: &#39;AWS::EC2::Instance&#39;
    Properties:
      InstanceType: &#39;t2.micro&#39;
      ImageId: &#39;ami-0aa117785d1c1bfe5&#39; # Find it 
      SubnetId: !Ref PublicSubnet1A
      SecurityGroupIds:
        - !Ref WebServerSecurityGroup
      Tags:
        - Key: &#39;Name&#39;
          Value: &#39;WebServerInstance1A&#39;
      UserData: # Build EC2 instance 
        Fn::Base64: !Sub | 
          #!/bin/bash
          yum install -y httpd
          systemctl start httpd
          systemctl enable httpd
          echo &quot;Hello from My Web Server 1A&quot; &gt; /var/www/html/index.html

# WebServerInstance2B
  WebServerInstance2B:
    Type: &#39;AWS::EC2::Instance&#39;
    Properties:
      InstanceType: &#39;t2.micro&#39;
      ImageId: &#39;ami-0aa117785d1c1bfe5&#39;
      SubnetId: !Ref PublicSubnet2B
      SecurityGroupIds:
        - !Ref WebServerSecurityGroup
      Tags:
        - Key: &#39;Name&#39;
          Value: &#39;WebServerInstance2B&#39;
      UserData: # Build Web server
        Fn::Base64: !Sub | 
          #!/bin/bash
          yum install -y httpd
          systemctl start httpd
          systemctl enable httpd
          echo &quot;Hello from My Web Server 1A&quot; &gt; /var/www/html/index.html</code></pre>
</div>
<div id="s3-bucket" class="section level4">
<h4>(3) S3 bucket</h4>
<p>An Amazon S3 bucket is a storage managed by AWS, storing files,
documents and images ensuring scalability, availability and durability.
It also hosts a static web page and bucket policies are attached to a S3
bucket to manage access to the bucket. I created a S3 bucket hosting a
static website by creating a index.html file and allowed the public
access to the bucket. In addition, I created a bucket policy attached to
the bucket to allow public access to the bucket to get all objects
stored.</p>
<pre class="yaml"><code># CloudFormationTemplateVersion
# Description

AWSTemplateFormatVersion: &#39;2010-09-09&#39;
Description: &#39;Cloudformation template for S3 Bucket&#39;
Resources:
  S3Bucket:
    Type: &#39;AWS::S3::Bucket&#39;
    Properties:
      BucketName: &#39;jenny-s3-bucket-yaml&#39;</code></pre>
<pre class="yaml"><code>AWSTemplateFormatVersion: &#39;2010-09-09&#39;
Description: &#39;S3 static file hosting&#39;

Resources:
  MyS3Bucket:
    Type: &#39;AWS::S3::Bucket&#39;
    Properties:
      BucketName: &#39;my-static-website-jh&#39;
      WebsiteConfiguration:
        IndexDocument: &#39;index.html&#39;
      PublicAccessBlockConfiguration:
        RestrictPublicBuckets: false # Allow public access

  BucketPolicy:
    Type: &#39;AWS::S3::BucketPolicy&#39;
    Properties:
      Bucket: !Ref MyS3Bucket
      PolicyDocument:
        Version: &#39;2012-10-17&#39;
        Statement:
          - Sid: &#39;PublicReadGetObject&#39;
            Effect: &#39;Allow&#39;
            Principal: &#39;*&#39;
            Action: &#39;s3:GetObject&#39;
            Resource: !Sub &#39;arn:aws:s3:::${MyS3Bucket}/*&#39;     </code></pre>
</div>
<div id="rds" class="section level4">
<h4>(4) RDS</h4>
<p>There are 2 main categories of database such as relational database
and non-relational database. Relational database stores data in an
organized and structural way such as tables. Tables are associated with
each other to provide more detailed information. In contrast,
non-relational databases typically have more flexible schemas and may
handle relationships between entities differently compared to relational
database. Amazon RDS is relational database and their provisioning,
configuration, patching and backups are automatically managed by AWS.
RDS is built on the top of EC2 instances and RDS supports various
database engines such as MySQL, PostgreSQL, MariaDB and ORACLE Database.
RDS can be replicated in different availability zones to enhance fault
tolerance and high availability. If primary database fails, standby
database is automatically operated for failover. Read replicas prevent
master database from being overloaded by separating read and write
operations and assuming read operations instead of master database. RDS
automatically backs up to Amazon S3.</p>
<pre class="yaml"><code>AWSTemplateFormatVersion: &#39;2010-09-09&#39;
Description: &#39;Create an RDS Instance with a VPC&#39;

Resources: 
  # VPC
  MyVPC:
    Type: AWS::EC2::VPC
    Properties:
      CidrBlock: &#39;10.0.0.0/16&#39;
      EnableDnsSupport: true
      EnableDnsHostnames: true
      Tags:
        - Key: Name
          Value: MyVPC

  # Private Subnets
  PrivateSubnet1:
    Type: AWS::EC2::Subnet
    Properties:
      VpcId: !Ref MyVPC
      CidrBlock: &#39;10.0.1.0/24&#39;
      AvailabilityZone: !Select [0, !GetAZs &#39;&#39;]
      Tags:
        - Key: Name
          Value: PrivateSubnet1

  PrivateSubnet2:
    Type: AWS::EC2::Subnet
    Properties:
      VpcId: !Ref MyVPC
      CidrBlock: &#39;10.0.2.0/24&#39;
      AvailabilityZone: !Select [1, !GetAZs &#39;&#39;]
      Tags:
        - Key: Name
          Value: PrivateSubnet2

  # DB Subnet Group
  MyDBSubnetGroup:
    Type: AWS::RDS::DBSubnetGroup
    Properties:
      DBSubnetGroupDescription: &#39;Subnet group for RDS&#39;
      SubnetIds:
        - !Ref PrivateSubnet1
        - !Ref PrivateSubnet2
      Tags:
        - Key: Name
          Value: MyDBSubnetGroup

  # Security Group
  MyDBSecurityGroup:
    Type: AWS::EC2::SecurityGroup
    Properties:
      GroupDescription: &#39;Allow MySQL access&#39;
      VpcId: !Ref MyVPC
      SecurityGroupIngress:
        - IpProtocol: tcp
          FromPort: 3306
          ToPort: 3306
          CidrIp: 10.0.0.0/16  # Allow connections from within the VPC

  # RDS Instance
  rdsDBInstance:
    Type: AWS::RDS::DBInstance
    Properties:
      AllocatedStorage: &#39;20&#39;
      DBInstanceClass: &#39;db.t3.micro&#39;
      BackupRetentionPeriod: 7
      DBInstanceIdentifier: &#39;MyNewRDSInstance&#39;
      Engine: &#39;mysql&#39;
      MasterUsername: &#39;admin&#39;
      MasterUserPassword: &#39;password&#39;
      DBSubnetGroupName: !Ref MyDBSubnetGroup
      VPCSecurityGroups:
        - !Ref MyDBSecurityGroup</code></pre>
</div>
<div id="auto-scaling-group" class="section level4">
<h4>(5) Auto Scaling Group</h4>
<p>An Auto Scaling Group (ASG) consists of a collection of EC2 instances
automatically increasing or decreasing the number of instances based on
the amount of incoming traffic and pre-defined parameters. These
parameters defines both minimum and maximum number of instances allowed
in the scaling group. ASG can be combined with AWS Elastic Load
balancers to distribute incoming traffic across multiple instances by
adjusting the number of instances to improve performance and fault
tolerance of applications. I configured an Auto Scaling group in
distinct public subnets with a minimum of 1 instance, a maximum of 3
instances and a desired capacity of 2 instances. I set up a CloudWatch
alarm to monitor CPU utilization. When CPU usage exceeds 70%, the alarm
triggers a scale-out policy to increase 1 instance in the auto scaling
group. This scaling process occurs every 300 seconds which ensures high
performance applications.</p>
<pre class="yaml"><code># My VPC
AWSTemplateFormatVersion: &#39;2010-09-09&#39;
Description: &#39;CloudFormation for VPC&#39;
Resources:
  MyVPC:
    Type: &#39;AWS::EC2::VPC&#39;
    Properties:
      CidrBlock: &#39;172.16.0.0/16&#39;
      EnableDnsSupport: true
      EnableDnsHostnames: true
      Tags:
        - Key: Name
          Value: MyVPC
# Public Subnet in AZ 1
  PublicSubnet1A:
    Type: &#39;AWS::EC2::Subnet&#39;  
    Properties:
      VpcId: !Ref MyVPC
      CidrBlock: &#39;172.16.1.0/24&#39;
      AvailabilityZone: !Select [0, !GetAZs &#39;&#39;]
      MapPublicIpOnLaunch: true
      Tags:
        - Key: Name
          Value: PublicSubnet1A
# App Private Subnet in AZ 1
  AppPrivateSubnet1A:
    Type: &#39;AWS::EC2::Subnet&#39;
    Properties:
      VpcId: !Ref MyVPC
      CidrBlock: &#39;172.16.2.0/24&#39;
      AvailabilityZone: !Select [0, !GetAZs &#39;&#39;]
      Tags:
        - Key: Name
          Value: AppPrivateSubnet1A
# Data Private Subnet in AZ 1
  DataPrivateSubnet1A:
    Type: &#39;AWS::EC2::Subnet&#39;
    Properties:
      VpcId: !Ref MyVPC
      CidrBlock: &#39;172.16.3.0/24&#39;
      AvailabilityZone: !Select [0, !GetAZs &#39;&#39;]
      Tags:
        - Key: Name
          Value: DataPrivateSubnet1     
# Public subnet in AZ 2
  PublicSubnet2B:
    Type: &#39;AWS::EC2::Subnet&#39;
    Properties:
      VpcId: !Ref MyVPC
      CidrBlock: &#39;172.16.4.0/24&#39;
      AvailabilityZone: !Select [1, !GetAZs &#39;&#39;]
      MapPublicIpOnLaunch: true
      Tags:
        - Key: Name
          Value: PublicSubnet2B
# App Private Subnet in AZ 2
  AppPrivateSubnet2B:
    Type: &#39;AWS::EC2::Subnet&#39;
    Properties:
      VpcId: !Ref MyVPC
      CidrBlock: &#39;172.16.5.0/24&#39;
      AvailabilityZone: !Select [1, !GetAZs &#39;&#39;]
      Tags:
        - Key: Name
          Value: AppPrivateSubnet2B
# Data Private Subnet in AZ 2
  DataPrivateSubnet2B:
    Type: &#39;AWS::EC2::Subnet&#39;
    Properties:
      VpcId: !Ref MyVPC
      CidrBlock: &#39;172.16.6.0/24&#39;
      AvailabilityZone: !Select [1, !GetAZs &#39;&#39;]
      Tags:
        - Key: Name
          Value: DataPrivateSubnet2B

# Define the Internet Gateway (IGW)
  InternetGateway:
    Type: &#39;AWS::EC2::InternetGateway&#39;
    Properties:
      Tags:
        - Key: Name
          Value: MyVPC-IGW
# Attach the IGW to VPC
  AttachGateway:
    Type: &#39;AWS::EC2::VPCGatewayAttachment&#39;
    Properties:
      VpcId: !Ref MyVPC
      InternetGatewayId: !Ref InternetGateway          

# Public Route Table
  PublicRouteTable:
    Type: &#39;AWS::EC2::RouteTable&#39;
    Properties:
      VpcId: !Ref MyVPC
      Tags:
        - Key: Name
          Value: PublicRouteTable
# Public Route
  PublicRoute:
    Type: &#39;AWS::EC2::Route&#39;
    DependsOn: AttachGateway
    Properties:
      RouteTableId: !Ref PublicRouteTable
      DestinationCidrBlock: &#39;0.0.0.0/0&#39;
      GatewayId: !Ref InternetGateway

# Attach the public route table to the public subnet (Public Subnet Association)
  PublicSubnet1ARouteTableAssociation:
    Type: &#39;AWS::EC2::SubnetRouteTableAssociation&#39;
    Properties:
      SubnetId: !Ref PublicSubnet1A
      RouteTableId: !Ref PublicRouteTable

# Attach the public route table to the public subnet 2B
  PublicSubnet2BRouteTableAssociation:
    Type: AWS::EC2::SubnetRouteTableAssociation
    Properties:
      SubnetId: !Ref PublicSubnet2B
      RouteTableId: !Ref PublicRouteTable

# Web Server / ALB Security Group 
  WebServerSecurityGroup:
    Type: &#39;AWS::EC2::SecurityGroup&#39;
    Properties:
      GroupDescription: &#39;Enable HTTP Access&#39;
      VpcId: !Ref MyVPC
      SecurityGroupIngress:
        - IpProtocol: &#39;tcp&#39;
          FromPort: &#39;80&#39;
          ToPort: &#39;80&#39;
          CidrIp: &#39;0.0.0.0/0&#39;

# Launch Config
  MyLaunchConfiguration:
    Type: &#39;AWS::EC2::LaunchTemplate&#39;
    Properties:
      LaunchTemplateData:
        ImageId: !Sub &#39;{{resolve:ssm:/aws/service/ami-amazon-linux-latest/amzn2-ami-hvm-x86_64-gp2}}&#39;
        InstanceType: &#39;t2.micro&#39;
        NetworkInterfaces:
          - DeviceIndex: 0
            SubnetId: !Ref PublicSubnet1A
            Groups:
              - !Ref WebServerSecurityGroup
        UserData:
          Fn::Base64: !Sub  |
            #!/bin/bash
            yum install -y httpd
            systemctl start httpd
            systemctl enable httpd
            echo &quot;Hello from Auto Scaling Instance&quot; &gt; /var/www/html/index.html
        
# ASG
  MyAutoScalingGroup:
    Type: &#39;AWS::AutoScaling::AutoScalingGroup&#39;
    Properties:
      LaunchTemplate:
        LaunchTemplateId: !Ref MyLaunchConfiguration
        Version: !GetAtt MyLaunchConfiguration.LatestVersionNumber
      MinSize: &#39;1&#39;
      MaxSize: &#39;3&#39;
      DesiredCapacity: &#39;2&#39;
      VPCZoneIdentifier:
        - !Ref PublicSubnet1A
        - !Ref PublicSubnet2B
      HealthCheckType: ELB
      HealthCheckGracePeriod: 300
      Tags:
        - Key: Environment
          Value: Production
          PropagateAtLaunch: true

# Alarm
  HighCPUAlarm:
    Type: &#39;AWS::CloudWatch::Alarm&#39;
    Properties:
      AlarmDescription: &#39;Alarm when CPU exceeds 70%&#39;
      MetricName: &#39;CPUUtilization&#39;
      Namespace: &#39;AWS/EC2&#39;
      Statistic: Average
      Period: &#39;300&#39;
      EvaluationPeriods: &#39;1&#39;
      Threshold: &#39;70&#39;
      ComparisonOperator: GreaterThanThreshold
      Dimensions:
        - Name: AutoScalingGroupName
          Value: !Ref MyAutoScalingGroup
      AlarmActions:
        - !Ref ScaleOutPolicy

# Scale Out Policy
  ScaleOutPolicy:
    Type: &#39;AWS::AutoScaling::ScalingPolicy&#39;
    Properties:
      AutoScalingGroupName: !Ref MyAutoScalingGroup
      PolicyType: SimpleScaling
      ScalingAdjustment: &#39;1&#39;
      Cooldown: &#39;300&#39;
      AdjustmentType: ChangeInCapacity</code></pre>
</div>
</div>
<div id="conclusion" class="section level3">
<h3>5. Conclusion</h3>
<p>Through these practical activities through AWS Management Console and
CloudFormation templates, I could imagine the back-end processes
interacted with a front-end web page by sending incoming traffic or
requests. One thing that I struggled with when learning about AWS
services for certification was imagining the entire behind-the-scenes
process for deep understanding. This project enables not only reviewing
fundamental concepts of AWS services but also applying the concepts to
real scenarios through hands-on experience. Infrastructure as Code is
the most effective way to configure AWS services effectively and
establish consistent environments by adjusting templates while reducing
manual errors posed by human interventions. It was a meaningful
experience for me to configure essential AWS services by utilizing
CloudFormation templates in person.</p>
<p><br> <br><br></p>
<p>Please click <a href="files/report-AWS.pdf">HERE</a> for the full
project report.</p>
</div>
</div>


<br><br>
<footer>
  <p class="copyright text-muted" align="center">Copyright &copy; 2022 John Appleseed</p>
</footer>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3,h4,h5",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = false;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
